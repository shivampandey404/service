(()=>{var e={};e.id=3,e.ids=[3],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},8893:e=>{"use strict";e.exports=require("buffer")},1282:e=>{"use strict";e.exports=require("child_process")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},5240:e=>{"use strict";e.exports=require("https")},8216:e=>{"use strict";e.exports=require("net")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},6804:()=>{},8645:()=>{},9669:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>d.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>o}),t(8748),t(2406),t(2145),t(5866);var a=t(3191),r=t(8716),i=t(7922),d=t.n(i),n=t(5231),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);t.d(s,l);let o=["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,8748)),"D:\\Service App\\client\\app\\admin\\page.tsx"]}]},{loading:[()=>Promise.resolve().then(t.bind(t,2406)),"D:\\Service App\\client\\app\\admin\\loading.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,2145)),"D:\\Service App\\client\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\Service App\\client\\app\\admin\\page.tsx"],m="/admin/page",p={require:t,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},912:(e,s,t)=>{Promise.resolve().then(t.bind(t,6469))},5303:()=>{},6469:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>_});var a=t(326),r=t(7577),i=t(5047),d=t(381),n=t(2643),l=t(772),o=t(7432),c=t(4099),m=t(4521),p=t(4019),u=t(7863);let x=m.fC,h=m.xz,g=m.h_;m.x8;let f=r.forwardRef(({className:e,...s},t)=>a.jsx(m.aV,{ref:t,className:(0,u.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s}));f.displayName=m.aV.displayName;let y=r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(g,{children:[a.jsx(f,{}),(0,a.jsxs)(m.VY,{ref:r,className:(0,u.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t,children:[s,(0,a.jsxs)(m.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[a.jsx(p.Z,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));y.displayName=m.VY.displayName;let j=({className:e,...s})=>a.jsx("div",{className:(0,u.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...s});j.displayName="DialogHeader";let b=r.forwardRef(({className:e,...s},t)=>a.jsx(m.Dx,{ref:t,className:(0,u.cn)("text-lg font-semibold leading-none tracking-tight",e),...s}));b.displayName=m.Dx.displayName,r.forwardRef(({className:e,...s},t)=>a.jsx(m.dk,{ref:t,className:(0,u.cn)("text-sm text-muted-foreground",e),...s})).displayName=m.dk.displayName;var N=t(7673),v=t(7506);c.Z.defaults.baseURL="https://service-backend-orkd.onrender.com";let w=(0,o.ZP)("https://service-backend-orkd.onrender.com");function k(){let[e,s]=(0,r.useState)([]),[t,i]=(0,r.useState)(!0),[o,m]=(0,r.useState)(""),[p,u]=(0,r.useState)(!1),[g,f]=(0,r.useState)(null),k=async()=>{try{let e=await c.Z.get("/api/admin/bookings");e.data.success&&s(e.data.bookings)}catch(e){console.error("Error fetching bookings:",e),d.Am.error("Failed to load bookings")}finally{i(!1)}},_=async(e,s)=>{f(e);try{(await c.Z.put(`/api/bookings/${e}/status`,{status:s})).data.success&&(w.emit("bookingStatusUpdate",{bookingId:e,status:s}),"rejected"===s?d.Am.success("Booking rejected and customer notified via email"):d.Am.success(`Booking ${s} successfully`),"completed"===s&&await R(e),k())}catch(e){console.error("Error updating booking status:",e),d.Am.error("Failed to update booking status")}finally{f(null)}},R=async e=>{try{await c.Z.post(`/api/bookings/${e}/schedule-removal`)}catch(e){console.error("Error scheduling booking removal:",e)}},S=async(e,s)=>{try{(await c.Z.put(`/api/bookings/${e}/payment-status`,{paymentStatus:s})).data.success&&(w.emit("paymentStatusUpdate",{bookingId:e,paymentStatus:s}),d.Am.success(`Payment status updated to ${s}`),k())}catch(e){console.error("Error updating payment status:",e),d.Am.error("Failed to update payment status")}},P=async e=>{if(!o.trim()){d.Am.error("Please enter a reply message");return}u(!0);try{let t=await c.Z.post(`https://service-backend-orkd.onrender.com/api/admin/bookings/${e}/reply`,{reply:o,bookingId:e});if(t.data.success)s(s=>s.map(s=>s._id===e?{...s,adminReply:o}:s)),w.emit("adminReply",{bookingId:e,reply:o}),d.Am.success("Reply sent successfully"),m("");else throw Error(t.data.message||"Failed to send reply")}catch(e){console.error("Reply error:",e),d.Am.error(e.response?.data?.message||"Failed to send reply")}finally{u(!1)}};return t?a.jsx("div",{children:"Loading..."}):a.jsx("div",{className:"space-y-4",children:0===e.length?a.jsx("p",{children:"No bookings found"}):e.map(e=>a.jsx(n.Zb,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"font-semibold",children:["Customer: ",e.customerName]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Email: ",e.customerEmail]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Phone: ",e.customerPhone]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Address: ",e.address]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Pincode: ",e.pincode]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Scheduled: ",new Date(e.scheduledDate).toLocaleDateString()," at ",e.scheduledTime]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Payment Method: ",e.paymentMethod]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"text-sm",children:["Booking ID: ",e._id]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Booked on: ",new Date(e.createdAt).toLocaleDateString()]})]})]}),(0,a.jsxs)("div",{className:"mt-2 border-t pt-2",children:[a.jsx("h4",{className:"font-medium mb-1",children:"Services:"}),e.services.map((e,s)=>(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsxs)("span",{children:[e.serviceName," x",e.quantity]}),(0,a.jsxs)("span",{children:["₹",e.totalPrice]})]},s)),(0,a.jsxs)("div",{className:"border-t mt-2 pt-2 font-semibold flex justify-between",children:[a.jsx("span",{children:"Total Amount:"}),(0,a.jsxs)("span",{children:["₹",e.totalAmount]})]})]}),(0,a.jsxs)("div",{className:"flex justify-between mt-2",children:[(0,a.jsxs)("p",{className:`text-sm ${"completed"===e.status?"text-green-600":"pending"===e.status?"text-yellow-600":"text-red-600"}`,children:["Status: ",e.status]}),(0,a.jsxs)("p",{className:`text-sm ${"completed"===e.paymentStatus?"text-green-600":"pending"===e.paymentStatus?"text-yellow-600":"text-red-600"}`,children:["Payment: ",e.paymentStatus]})]}),(0,a.jsxs)("div",{className:"flex justify-between mt-4 border-t pt-4",children:[(0,a.jsxs)("div",{className:"space-x-2",children:[a.jsx(l.z,{onClick:()=>_(e._id,"accepted"),disabled:"pending"!==e.status||g===e._id,className:`${"accepted"===e.status?"bg-green-600":"bg-blue-600"} text-white px-4 py-2 rounded`,children:g===e._id?a.jsx(v.Z,{className:"h-4 w-4 animate-spin"}):"Accept"}),a.jsx(l.z,{onClick:()=>_(e._id,"rejected"),disabled:"pending"!==e.status||g===e._id,className:"bg-red-600 text-white px-4 py-2 rounded",children:g===e._id?a.jsx(v.Z,{className:"h-4 w-4 animate-spin"}):"Reject"}),a.jsx(l.z,{onClick:()=>_(e._id,"completed"),disabled:"accepted"!==e.status||g===e._id,className:"bg-green-600 text-white px-4 py-2 rounded",children:g===e._id?a.jsx(v.Z,{className:"h-4 w-4 animate-spin"}):"Complete"}),(0,a.jsxs)(x,{children:[a.jsx(h,{asChild:!0,children:a.jsx(l.z,{variant:"outline",className:"ml-2",children:e.adminReply?"Update Reply":"Reply to Customer"})}),(0,a.jsxs)(y,{children:[a.jsx(j,{children:(0,a.jsxs)(b,{children:["Reply to Booking #",e._id]})}),(0,a.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Your Reply"}),a.jsx(N.g,{value:o,onChange:e=>m(e.target.value),placeholder:"Enter your reply to the customer...",className:"min-h-[100px]"})]}),a.jsx(l.z,{onClick:()=>P(e._id),disabled:p||!o.trim(),className:"w-full",children:p?(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(v.Z,{className:"h-4 w-4 animate-spin"}),a.jsx("span",{children:"Sending..."})]}):"Send Reply"})]})]})]})]}),e.adminReply&&(0,a.jsxs)("div",{className:"mt-2 bg-gray-50 p-3 rounded-md",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Previous Reply:"}),a.jsx("p",{className:"text-sm text-gray-600",children:e.adminReply})]}),(0,a.jsxs)("div",{className:"space-x-2",children:[a.jsx(l.z,{onClick:()=>S(e._id,"completed"),disabled:"completed"===e.paymentStatus,className:"bg-green-600 text-white px-4 py-2 rounded",children:"Mark Paid"}),a.jsx(l.z,{onClick:()=>S(e._id,"pending"),disabled:"pending"===e.paymentStatus,className:"bg-yellow-600 text-white px-4 py-2 rounded",children:"Mark Pending"})]})]})]})},e._id))})}function _(){(0,i.useRouter)();let[e,s]=(0,r.useState)(!1);return e?(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[a.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Admin Dashboard"}),a.jsx("div",{className:"grid grid-cols-1 gap-6",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Recent Bookings"}),a.jsx(k,{})]})})]}):null}},2643:(e,s,t)=>{"use strict";t.d(s,{Ol:()=>n,SZ:()=>o,Zb:()=>d,aY:()=>c,ll:()=>l});var a=t(326),r=t(7577),i=t(7863);let d=r.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));d.displayName="Card";let n=r.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...s}));n.displayName="CardHeader";let l=r.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));l.displayName="CardTitle";let o=r.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",e),...s}));o.displayName="CardDescription";let c=r.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:(0,i.cn)("p-6 pt-0",e),...s}));c.displayName="CardContent",r.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter"},7673:(e,s,t)=>{"use strict";t.d(s,{g:()=>d});var a=t(326),r=t(7577),i=t(7863);let d=r.forwardRef(({className:e,...s},t)=>a.jsx("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:t,...s}));d.displayName="Textarea"},2406:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i});var a=t(9510),r=t(9790);function i(){return(0,a.jsxs)("div",{className:"container mx-auto p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[a.jsx(r.O,{className:"h-8 w-48"}),a.jsx(r.O,{className:"h-10 w-32"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[void 0,void 0,void 0].map((e,s)=>(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[a.jsx(r.O,{className:"h-8 w-24 mb-2"}),a.jsx(r.O,{className:"h-6 w-16"})]},s))}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[a.jsx(r.O,{className:"h-6 w-40 mb-6"}),a.jsx("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,a.jsxs)("div",{className:"flex justify-between items-center py-2",children:[a.jsx(r.O,{className:"h-4 w-32"}),a.jsx(r.O,{className:"h-4 w-40"}),a.jsx(r.O,{className:"h-4 w-24"}),a.jsx(r.O,{className:"h-4 w-20"})]},s))})]})]})}},8748:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(8570).createProxy)(String.raw`D:\Service App\client\app\admin\page.tsx#default`)},9790:(e,s,t)=>{"use strict";t.d(s,{O:()=>r});var a=t(9510);function r({className:e,...s}){return a.jsx("div",{className:`animate-pulse rounded-md bg-gray-200 ${e}`,...s})}}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[5,432,793],()=>t(9669));module.exports=a})();