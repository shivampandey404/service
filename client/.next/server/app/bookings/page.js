(()=>{var e={};e.id=926,e.ids=[926],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},8893:e=>{"use strict";e.exports=require("buffer")},1282:e=>{"use strict";e.exports=require("child_process")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},5240:e=>{"use strict";e.exports=require("https")},8216:e=>{"use strict";e.exports=require("net")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},6804:()=>{},8645:()=>{},5460:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>o,routeModule:()=>p,tree:()=>c}),s(1977),s(8059),s(2145),s(5866);var r=s(3191),a=s(8716),i=s(7922),n=s.n(i),l=s(5231),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);s.d(t,d);let c=["",{children:["bookings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,1977)),"D:\\Service App\\client\\app\\bookings\\page.tsx"]}]},{loading:[()=>Promise.resolve().then(s.bind(s,8059)),"D:\\Service App\\client\\app\\bookings\\loading.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,2145)),"D:\\Service App\\client\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],o=["D:\\Service App\\client\\app\\bookings\\page.tsx"],u="/bookings/page",m={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/bookings/page",pathname:"/bookings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},7777:(e,t,s)=>{Promise.resolve().then(s.bind(s,3324))},5303:()=>{},3324:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>w});var r,a=s(326),i=s(7577),n=s(4099),l=s(2643),d=s(381),c=s(5047),o=s(7432),u="https://js.stripe.com/v3",m=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,p=function(){for(var e=document.querySelectorAll('script[src^="'.concat(u,'"]')),t=0;t<e.length;t++){var s=e[t];if(m.test(s.src))return s}return null},x=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",s=document.createElement("script");s.src="".concat(u).concat(t);var r=document.head||document.body;if(!r)throw Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(s),s},h=function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"5.5.0",startTime:t})},v=null,f=null,j=null,g=function(e,t,s){if(null===e)return null;var r=e.apply(void 0,t);return h(r,s),r},y=!1,b=function(){return r||(r=(null!==v?v:(v=new Promise(function(e,t){if("undefined"==typeof window||"undefined"==typeof document){e(null);return}if(window.Stripe,window.Stripe){e(window.Stripe);return}try{var s,r=p();r?r&&null!==j&&null!==f&&(r.removeEventListener("load",j),r.removeEventListener("error",f),null===(s=r.parentNode)||void 0===s||s.removeChild(r),r=x(null)):r=x(null),j=function(){window.Stripe?e(window.Stripe):t(Error("Stripe.js not available"))},f=function(){t(Error("Failed to load Stripe.js"))},r.addEventListener("load",j),r.addEventListener("error",f)}catch(e){t(e);return}})).catch(function(e){return v=null,Promise.reject(e)})).catch(function(e){return r=null,Promise.reject(e)}))};Promise.resolve().then(function(){return b()}).catch(function(e){y||console.warn(e)}),n.Z.defaults.baseURL="https://service-backend-orkd.onrender.com",(0,o.ZP)("https://service-backend-orkd.onrender.com");let N=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];y=!0;var r=Date.now();return b().then(function(e){return g(e,t,r)})}(process.env.NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY);function w(){(0,c.useRouter)();let[e,t]=(0,i.useState)([]),[s,r]=(0,i.useState)(!0),[o,u]=(0,i.useState)(!1),[m,p]=(0,i.useState)(null),[x,h]=(0,i.useState)({}),v=async()=>{if(m&&x.upiId)try{(await n.Z.post(`/api/payments/upi/${m._id}`,{upiId:x.upiId})).data.success&&(d.Am.success("UPI payment initiated"),u(!1))}catch(e){d.Am.error("UPI payment failed")}},f=async()=>{if(m)try{let e=await N;if(!e)throw Error("Stripe failed to initialize");let{paymentMethod:t}=await e.createPaymentMethod({type:"card",card:{token:x.cardNumber}});if(!t)throw Error("Failed to create payment method");let{clientSecret:s}=(await n.Z.post(`/api/payments/create-intent/${m._id}`)).data,r=await e.confirmCardPayment(s,{payment_method:t.id});if(r.error)throw Error(r.error.message);"succeeded"===r.paymentIntent.status&&(d.Am.success("Payment successful"),u(!1))}catch(e){d.Am.error(e.message||"Payment failed")}};return s?(0,a.jsxs)("div",{className:"container mx-auto p-4",children:[a.jsx("div",{className:"h-8 bg-gray-200 rounded-md w-48 mb-6 animate-pulse"}),a.jsx("div",{className:"flex justify-center space-x-2 mb-8",children:[void 0,void 0,void 0].map((e,t)=>a.jsx("div",{className:"w-3 h-3 bg-primary rounded-full animate-bounce",style:{animationDelay:`${.2*t}s`}},t))}),a.jsx("div",{className:"space-y-4",children:[void 0,void 0,void 0].map((e,t)=>a.jsx(l.Zb,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"space-y-3 flex-1",children:[a.jsx("div",{className:"h-5 bg-gray-200 rounded w-48 animate-pulse"}),a.jsx("div",{className:"space-y-2",children:[void 0,void 0,void 0,void 0].map((e,t)=>a.jsx("div",{className:"h-4 bg-gray-100 rounded w-3/4 animate-pulse"},t))}),a.jsx("div",{className:"mt-4 space-y-2",children:[void 0,void 0].map((e,t)=>a.jsx("div",{className:"h-4 bg-gray-100 rounded w-1/2 animate-pulse"},t))})]}),(0,a.jsxs)("div",{className:"text-right space-y-3",children:[a.jsx("div",{className:"h-5 bg-gray-200 rounded w-24 ml-auto animate-pulse"}),a.jsx("div",{className:"h-4 bg-gray-100 rounded w-20 ml-auto animate-pulse"}),a.jsx("div",{className:"h-4 bg-gray-100 rounded w-28 ml-auto animate-pulse"})]})]})},t))})]}):(0,a.jsxs)("div",{className:"container mx-auto p-4",children:[a.jsx("h1",{className:"text-2xl font-bold mb-6",children:"My Bookings"}),a.jsx("div",{className:"space-y-4",children:0===e.length?a.jsx("p",{children:"No bookings found"}):e.map(e=>(0,a.jsxs)(l.Zb,{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"font-semibold",children:["Booking ID: ",e._id]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Booked on: ",new Date(e.createdAt).toLocaleDateString()]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Scheduled: ",new Date(e.scheduledDate).toLocaleDateString()," at ",e.scheduledTime]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Address: ",e.address]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Pincode: ",e.pincode]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Payment Method: ",e.paymentMethod]}),a.jsx("div",{className:"mt-2",children:e.services.map((e,t)=>(0,a.jsxs)("div",{className:"text-sm",children:[e.serviceName," x",e.quantity," - ₹",e.totalPrice]},t))})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"font-semibold",children:["Total: ₹",e.totalAmount]}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsxs)("p",{className:`text-sm ${"completed"===e.status?"text-green-600":"accepted"===e.status?"text-blue-600":"rejected"===e.status?"text-red-600":"text-yellow-600"}`,children:["Status: ","rejected"===e.status?"Technician not available":e.status]}),"rejected"===e.status&&a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Please try booking for a different time slot"})]}),(0,a.jsxs)("p",{className:`text-sm ${"completed"===e.paymentStatus?"text-green-600":"pending"===e.paymentStatus?"text-yellow-600":"text-red-600"}`,children:["Payment: ",e.paymentStatus]})]})]}),e.adminReply&&(0,a.jsxs)("div",{className:"mt-4 bg-blue-50 p-4 rounded-md w-full",children:[a.jsx("h4",{className:"text-sm font-semibold text-blue-800 mb-2",children:"Message from Service Provider:"}),a.jsx("p",{className:"text-sm text-gray-700",children:e.adminReply})]})]},e._id))}),o&&m&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:(0,a.jsxs)(l.Zb,{className:"p-6 w-full max-w-md",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold mb-4",children:["Payment for Booking ",m._id]}),"upi"===m.paymentMethod?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"UPI ID"}),a.jsx("input",{type:"text",className:"w-full p-2 border rounded",placeholder:"Enter UPI ID",onChange:e=>h({upiId:e.target.value})})]}),a.jsx("button",{className:"w-full bg-primary text-white p-2 rounded",onClick:v,children:"Pay with UPI"})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Card Number"}),a.jsx("input",{type:"text",className:"w-full p-2 border rounded",placeholder:"Card number",onChange:e=>h(t=>({...t,cardNumber:e.target.value}))})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Expiry Date"}),a.jsx("input",{type:"text",className:"w-full p-2 border rounded",placeholder:"MM/YY",onChange:e=>h(t=>({...t,expiryDate:e.target.value}))})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"CVV"}),a.jsx("input",{type:"text",className:"w-full p-2 border rounded",placeholder:"CVV",onChange:e=>h(t=>({...t,cvv:e.target.value}))})]})]}),a.jsx("button",{className:"w-full bg-primary text-white p-2 rounded",onClick:f,children:"Pay with Card"})]}),a.jsx("button",{className:"w-full mt-4 bg-gray-200 p-2 rounded",onClick:()=>u(!1),children:"Cancel"})]})})]})}},2643:(e,t,s)=>{"use strict";s.d(t,{Ol:()=>l,SZ:()=>c,Zb:()=>n,aY:()=>o,ll:()=>d});var r=s(326),a=s(7577),i=s(7863);let n=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));n.displayName="Card";let l=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...t}));l.displayName="CardHeader";let d=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));d.displayName="CardTitle";let c=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",e),...t}));c.displayName="CardDescription";let o=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,i.cn)("p-6 pt-0",e),...t}));o.displayName="CardContent",a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},8059:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s(9510),a=s(9790);function i(){return(0,r.jsxs)("div",{className:"container mx-auto p-4",children:[r.jsx(a.O,{className:"h-8 w-48 mb-8 mx-auto"}),r.jsx("div",{className:"space-y-4",children:[void 0,void 0,void 0].map((e,t)=>(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[(0,r.jsxs)("div",{className:"flex justify-between mb-4",children:[r.jsx(a.O,{className:"h-6 w-32"}),r.jsx(a.O,{className:"h-6 w-24"})]}),(0,r.jsxs)("div",{className:"space-y-3 mb-4",children:[r.jsx(a.O,{className:"h-4 w-full"}),r.jsx(a.O,{className:"h-4 w-5/6"}),r.jsx(a.O,{className:"h-4 w-3/4"})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx(a.O,{className:"h-5 w-24"}),r.jsx(a.O,{className:"h-10 w-28"})]})]},t))})]})}},1977:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`D:\Service App\client\app\bookings\page.tsx#default`)},9790:(e,t,s)=>{"use strict";s.d(t,{O:()=>a});var r=s(9510);function a({className:e,...t}){return r.jsx("div",{className:`animate-pulse rounded-md bg-gray-200 ${e}`,...t})}}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[5,432,793],()=>s(5460));module.exports=r})();