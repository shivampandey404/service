(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[478],{3431:function(e,a,t){Promise.resolve().then(t.bind(t,9266))},9266:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return m}});var s=t(7437),r=t(2265),i=t(9205);let n=(0,i.Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),d=(0,i.Z)("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),c=(0,i.Z)("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);var o=t(3464),l=t(257);o.Z.defaults.baseURL="http://localhost:5000",o.Z.defaults.headers.post["Content-Type"]="application/json";var m=function(){let[e,a]=(0,r.useState)(null),[t,i]=(0,r.useState)("card"),[m,u]=(0,r.useState)(!1);(0,r.useEffect)(()=>{a({name:"John Doe",email:"john@example.com",phone:"+1234567890",services:[{id:"1",name:"Service 1",price:1e3,quantity:1},{id:"2",name:"Service 2",price:500,quantity:2}]})},[]);let h=e=>e.reduce((e,a)=>e+a.price*a.quantity,0),y=async()=>{if(e){u(!0);try{if("cod"===t){(await o.Z.post("/api/bookings",{...e,paymentMethod:"cod",paymentStatus:"pending"})).data.success&&alert("Booking confirmed successfully!");return}let a=await o.Z.post("/api/payments/create-order",{amount:h(e.services)}),s={key:l.env.NEXT_PUBLIC_RAZORPAY_KEY_ID,amount:100*h(e.services),currency:"INR",name:"Your Business Name",description:"Service Booking Payment",order_id:a.data.orderId,handler:async e=>{await o.Z.post("/api/payments/verify",{paymentId:e.razorpay_payment_id,orderId:e.razorpay_order_id,signature:e.razorpay_signature}),alert("Payment successful!")},prefill:{name:e.name,email:e.email,contact:e.phone},theme:{color:"#6366f1"}};new window.Razorpay(s).open()}catch(e){var a,s;console.error("Payment error:",e),alert((null===(s=e.response)||void 0===s?void 0:null===(a=s.data)||void 0===a?void 0:a.message)||"Payment failed")}finally{u(!1)}}};return e?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Complete Your Payment"}),(0,s.jsx)("p",{className:"mt-2 text-gray-600",children:"Choose your preferred payment method below"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,s.jsx)("div",{className:"md:col-span-2",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 space-y-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Payment Method"}),(0,s.jsx)("div",{className:"space-y-4",children:[{id:"card",icon:n,title:"Credit/Debit Card",desc:"Pay securely with your card"},{id:"upi",icon:d,title:"UPI",desc:"Pay using UPI"},{id:"cod",icon:c,title:"Cash on Delivery",desc:"Pay when service is delivered"}].map(e=>(0,s.jsx)("div",{className:"p-4 border rounded-lg cursor-pointer transition-all ".concat(t===e.id?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-indigo-200"),onClick:()=>i(e.id),children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"p-2 rounded-full ".concat(t===e.id?"bg-indigo-100":"bg-gray-100"),children:(0,s.jsx)(e.icon,{className:"w-6 h-6 ".concat(t===e.id?"text-indigo-600":"text-gray-500")})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"font-medium text-gray-900",children:e.title}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:e.desc})]}),(0,s.jsx)("div",{className:"flex items-center h-5",children:(0,s.jsx)("input",{type:"radio",checked:t===e.id,onChange:()=>i(e.id),className:"h-4 w-4 text-indigo-600 border-gray-300 focus:ring-indigo-500"})})]})},e.id))}),(0,s.jsx)("button",{onClick:y,disabled:m,className:"w-full bg-indigo-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Processing...":"Pay ₹".concat(h(e.services))})]})}),(0,s.jsx)("div",{className:"md:col-span-1",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Order Summary"}),(0,s.jsxs)("div",{className:"space-y-4",children:[e.services.map(e=>(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsxs)("span",{className:"text-gray-600",children:[e.name," x",e.quantity]}),(0,s.jsxs)("span",{className:"font-medium",children:["₹",e.price*e.quantity]})]},e.id)),(0,s.jsx)("div",{className:"pt-4 border-t",children:(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"font-semibold text-gray-900",children:"Total Amount"}),(0,s.jsxs)("span",{className:"font-semibold text-gray-900",children:["₹",h(e.services)]})]})})]})]})})]})]})}):null}},9205:function(e,a,t){"use strict";t.d(a,{Z:function(){return c}});var s=t(2265);let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=function(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return a.filter((e,a,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===a).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,s.forwardRef)((e,a)=>{let{color:t="currentColor",size:r=24,strokeWidth:d=2,absoluteStrokeWidth:c,className:o="",children:l,iconNode:m,...u}=e;return(0,s.createElement)("svg",{ref:a,...n,width:r,height:r,stroke:t,strokeWidth:c?24*Number(d)/Number(r):d,className:i("lucide",o),...u},[...m.map(e=>{let[a,t]=e;return(0,s.createElement)(a,t)}),...Array.isArray(l)?l:[l]])}),c=(e,a)=>{let t=(0,s.forwardRef)((t,n)=>{let{className:c,...o}=t;return(0,s.createElement)(d,{ref:n,iconNode:a,className:i("lucide-".concat(r(e)),c),...o})});return t.displayName="".concat(e),t}}},function(e){e.O(0,[464,971,117,744],function(){return e(e.s=3431)}),_N_E=e.O()}]);