(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{9194:function(e,t,a){Promise.resolve().then(a.t.bind(a,7960,23)),Promise.resolve().then(a.bind(a,9294)),Promise.resolve().then(a.bind(a,4196)),Promise.resolve().then(a.t.bind(a,2972,23)),Promise.resolve().then(a.t.bind(a,911,23))},9294:function(e,t,a){"use strict";a.d(t,{Providers:function(){return o}});var r=a(7437),s=a(605),n=a(9064);function o(e){let{children:t}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.SessionProvider,{children:t}),(0,r.jsx)(n.x7,{position:"top-center"})]})}},4196:function(e,t,a){"use strict";a.d(t,{default:function(){return h}});var r=a(7437),s=a(7648),n=a(2869),o=a(2265),l=a(9304),i=a(3464),d=a(9376),c=a(4438),u=a(2489),m=a(3566),g=a(1817);let f="kumarraushan04702@gmail.com";function h(){let[e,t]=(0,o.useState)(!1),[a,h]=(0,o.useState)(!1),[x,p]=(0,o.useState)(!1),[v,b]=(0,o.useState)(""),[y,j]=(0,o.useState)(!1),[N,w]=(0,o.useState)(""),k=(0,d.useRouter)(),[P,S]=(0,o.useState)(null),[C,O]=(0,o.useState)(!1),[A,T]=(0,o.useState)(!1),[E,I]=(0,o.useState)(!1),z=async()=>{if(!v){c.Am.error("Please enter your email");return}j(!0);try{let e=await i.Z.post("https://service-backend-orkd.onrender.com/api/generate-otp",{email:v});console.log("OTP Generation Response:",e.data),e.data.success&&(t(!1),h(!0),c.Am.success("Please check your email for OTP"))}catch(r){var e,a;console.error("OTP Generation Error:",r);let t=(null==r?void 0:null===(a=r.response)||void 0===a?void 0:null===(e=a.data)||void 0===e?void 0:e.message)||"Failed to send OTP";c.Am.error(t)}finally{j(!1)}},_=async()=>{if(!N){c.Am.error("Please enter the OTP");return}j(!0);try{let e=await i.Z.post("https://service-backend-orkd.onrender.com/api/verify-otp",{email:v,otp:N});if(e.data.success){let t={...e.data.user,isAdmin:e.data.user.isAdmin||!1};S(t),localStorage.setItem("userData",JSON.stringify(t)),h(!1),p(!0),O(t.isAdmin),w(""),b(""),c.Am.success("Successfully logged in!"),localStorage.setItem("isLoggedIn","true"),t.isAdmin&&c.Am.success("Welcome, Admin!")}else c.Am.error("Invalid OTP. Please try again.")}catch(r){var e,t;let a=(null==r?void 0:null===(t=r.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||"Failed to verify OTP";c.Am.error(a)}finally{j(!1)}},D=async()=>{T(!0);try{await new Promise(e=>setTimeout(e,1e3)),p(!1),O(!1),S(null),localStorage.removeItem("isLoggedIn"),localStorage.removeItem("userData"),c.Am.success("Logged out successfully"),k.push("/")}catch(e){c.Am.error("Failed to logout")}finally{T(!1)}};return(0,o.useEffect)(()=>{let e=localStorage.getItem("isLoggedIn"),t=localStorage.getItem("userData");"true"===e&&(p(!0),t&&S(JSON.parse(t)))},[]),(0,o.useEffect)(()=>{let e=async()=>{let e=localStorage.getItem("userData");if(console.log("UserData from localStorage:",e),!e){console.log("No user data found");return}let{email:t}=JSON.parse(e);console.log("Checking admin status for email:",t);let a=t===f;console.log("Is admin user:",a),O(a)};x&&e()},[x]),console.log("Current isAdmin state:",C),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("header",{className:"bg-white shadow-sm",children:(0,r.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[(0,r.jsx)(s.default,{href:"/",className:"text-2xl font-bold text-blue-600 transition-colors duration-200 hover:text-blue-700",children:"PRK Service Group"}),(0,r.jsx)("button",{className:"lg:hidden p-2 text-gray-600 hover:text-blue-600 transition-colors duration-200 rounded-md hover:bg-gray-100",onClick:()=>I(!E),children:E?(0,r.jsx)(u.Z,{className:"h-6 w-6 transition-transform duration-200 rotate-0"}):(0,r.jsx)(m.Z,{className:"h-6 w-6 transition-transform duration-200 rotate-0"})}),(0,r.jsxs)("div",{className:"w-full lg:w-auto flex flex-col lg:flex-row lg:items-center gap-4\n                overflow-hidden transition-all duration-300 ease-in-out\n                ".concat(E?"max-h-[500px] opacity-100":"max-h-0 lg:max-h-[500px] opacity-0 lg:opacity-100","\n                lg:overflow-visible lg:transition-none"),children:[(0,r.jsx)("nav",{className:"flex-1",children:(0,r.jsxs)("ul",{className:"flex flex-col lg:flex-row gap-4 lg:items-center",children:[(0,r.jsx)("li",{children:(0,r.jsx)(s.default,{href:"/",className:"text-gray-600 hover:text-blue-600 block py-2 lg:py-0 transition-all duration-200    hover:translate-x-1 lg:hover:translate-x-0 hover:bg-gray-50 lg:hover:bg-transparent px-2 rounded",onClick:()=>I(!1),children:"Home"})}),(0,r.jsx)("li",{children:(0,r.jsx)(s.default,{href:"/services",className:"text-gray-600 hover:text-blue-600 block py-2 lg:py-0 transition-all duration-200    hover:translate-x-1 lg:hover:translate-x-0 hover:bg-gray-50 lg:hover:bg-transparent px-2 rounded",onClick:()=>I(!1),children:"Services"})}),(0,r.jsx)("li",{children:(0,r.jsx)(s.default,{href:"/about",className:"text-gray-600 hover:text-blue-600 block py-2 lg:py-0 transition-all duration-200    hover:translate-x-1 lg:hover:translate-x-0 hover:bg-gray-50 lg:hover:bg-transparent px-2 rounded",onClick:()=>I(!1),children:"About Us"})}),x&&(0,r.jsx)("li",{children:(0,r.jsx)(s.default,{href:"/bookings",className:"text-gray-600 hover:text-blue-600 block py-2 lg:py-0 transition-all duration-200    hover:translate-x-1 lg:hover:translate-x-0 hover:bg-gray-50 lg:hover:bg-transparent px-2 rounded",onClick:()=>I(!1),children:"My Bookings"})}),C&&(null==P?void 0:P.email)===f&&(0,r.jsx)("li",{children:(0,r.jsx)(s.default,{href:"/admin",className:"text-gray-600 hover:text-blue-600 block py-2 lg:py-0 transition-all duration-200    hover:translate-x-1 lg:hover:translate-x-0 hover:bg-gray-50 lg:hover:bg-transparent px-2 rounded",onClick:()=>I(!1),children:"Admin Dashboard"})})]})}),(0,r.jsx)("div",{className:"lg:ml-4 transition-transform duration-200",children:x?(0,r.jsx)(n.z,{variant:"outline",onClick:D,disabled:A,className:"w-full lg:w-auto min-w-[80px] transition-all duration-200 hover:scale-105",children:A?(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,r.jsx)(g.Z,{className:"h-4 w-4 animate-spin"}),(0,r.jsx)("span",{children:"..."})]}):"Log Out"}):(0,r.jsx)(n.z,{variant:"outline",onClick:()=>{t(!0)},className:"w-full lg:w-auto transition-all duration-200 hover:scale-105",children:"Log In"})})]})]})})}),(0,r.jsx)(l.yo,{open:e,onOpenChange:t,children:(0,r.jsxs)(l.ue,{side:"right",className:"w-[400px]",children:[(0,r.jsxs)(l.Tu,{children:[(0,r.jsx)(l.bC,{children:"Login"}),(0,r.jsx)(l.Ei,{children:"Enter your email to receive an OTP."})]}),(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{htmlFor:"email",className:"text-sm font-medium",children:"Email"}),(0,r.jsx)("input",{type:"email",id:"email",value:v,onChange:e=>b(e.target.value),className:"w-full px-3 py-2 border rounded-md",placeholder:"Enter your email"})]}),(0,r.jsx)(n.z,{className:"w-full",onClick:z,disabled:y,children:y?"Processing...":"Continue"})]})})]})}),(0,r.jsx)(l.yo,{open:a,onOpenChange:h,children:(0,r.jsxs)(l.ue,{side:"right",className:"w-[400px]",children:[(0,r.jsxs)(l.Tu,{children:[(0,r.jsx)(l.bC,{children:"Enter OTP"}),(0,r.jsx)(l.Ei,{children:"Enter the OTP sent to your email."})]}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"otp",className:"block text-sm font-medium text-gray-700",children:"OTP"}),(0,r.jsx)("input",{type:"text",id:"otp",value:N,onChange:e=>w(e.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Enter OTP"})]}),(0,r.jsx)(n.z,{onClick:_,className:"w-full",disabled:y,children:y?"Verifying...":"Verify"})]})})]})})]})}},2869:function(e,t,a){"use strict";a.d(t,{z:function(){return d}});var r=a(7437),s=a(2265),n=a(7495),o=a(535),l=a(4508);let i=(0,o.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:a,variant:s,size:o,asChild:d=!1,...c}=e,u=d?n.g7:"button";return(0,r.jsx)(u,{className:(0,l.cn)(i({variant:s,size:o,className:a})),ref:t,...c})});d.displayName="Button"},9304:function(e,t,a){"use strict";a.d(t,{Ei:function(){return x},Tu:function(){return f},bC:function(){return h},ue:function(){return g},yo:function(){return d}});var r=a(7437),s=a(2265),n=a(4098),o=a(535),l=a(2489),i=a(4508);let d=n.fC;n.xz,n.x8;let c=n.h_,u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.aV,{className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s,ref:t})});u.displayName=n.aV.displayName;let m=(0,o.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),g=s.forwardRef((e,t)=>{let{side:a="right",className:s,children:o,...d}=e;return(0,r.jsxs)(c,{children:[(0,r.jsx)(u,{}),(0,r.jsxs)(n.VY,{ref:t,className:(0,i.cn)(m({side:a}),s),...d,children:[o,(0,r.jsxs)(n.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,r.jsx)(l.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});g.displayName=n.VY.displayName;let f=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};f.displayName="SheetHeader";let h=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold text-foreground",a),...s})});h.displayName=n.Dx.displayName;let x=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.dk,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...s})});x.displayName=n.dk.displayName},4508:function(e,t,a){"use strict";a.d(t,{cn:function(){return n}});var r=a(1994),s=a(3335);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.m6)((0,r.W)(t))}},7960:function(){}},function(e){e.O(0,[944,137,64,464,972,444,986,461,971,117,744],function(){return e(e.s=9194)}),_N_E=e.O()}]);